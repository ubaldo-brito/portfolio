<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Deutschlernen Spiel</title>
    
    <style>
        body {
            background-color: #303f5c;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            position: relative;
        }
        
        #spelbrett {
            width: 900px;
            height: 450px;
            display: grid;
            grid-template-columns: repeat(4, 210px);
            grid-template-rows: repeat(4, 100px);
            gap: 20px;
            position: relative;
            z-index: 1;
        }
        
        .feld {
            border: 5px solid #aa2d2d;
            border-radius: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #f0f0f0;
            position: relative;
            text-align: center;
        }

        #dice {
            position: fixed;
            width: 100px;
            height: 100px;
            top: 44%;
            left: 47%;
            transform: translate(-50%, -50%);
            cursor: pointer;
            z-index: 2000;
        }
        
        #diceImg {
            display: block;
            width: 180%;
            height: 180%;
            border-radius: 20px;
        }

        .feld1 { grid-row: 1; grid-column: 1; }
        .feld2 { grid-row: 1; grid-column: 2; }
        .feld3 { grid-row: 1; grid-column: 3; }
        .feld4 { grid-row: 1; grid-column: 4; }
        .feld5 { grid-row: 2; grid-column: 4; }
        .feld6 { grid-row: 3; grid-column: 4; }
        .feld7 { grid-row: 4; grid-column: 4; }
        .feld8 { grid-row: 4; grid-column: 3; }
        .feld9 { grid-row: 4; grid-column: 2; }
        .feld10 { grid-row: 4; grid-column: 1; }
        .feld11 { grid-row: 3; grid-column: 1; }
        .feld12 { grid-row: 2; grid-column: 1; }
        
        #piece {
            position: absolute;
            width: 55px;
            height: 95px;
            z-index: 2500;
        }

        #overlay {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 400px;
            min-height: 150px;
            background-color: #fff;
            border: 5px solid #8e2a35;
            border-radius: 20px;
            display: none;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
            z-index: 3000;
        }

        #overlay button {
            position: absolute;
            top: 10px;
            left: 400px;
            font-size: 18px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="spelbrett">
        <div class="feld feld1">eine Rolle spielen für</div>
        <div class="feld feld2">Abläufe dokumentieren</div>
        <div class="feld feld3">Abschied nehmen von</div>
        <div class="feld feld4">Abstand halten von</div>
        <div class="feld feld5">Anerkennung genießen</div>
        <div class="feld feld6">ein Unternehmen leiten</div>
        <div class="feld feld7">Anstrengungen unternehmen für</div>
        <div class="feld feld8">Arbeit erledigen</div>
        <div class="feld feld9">auf der Suche sein nach</div>
        <div class="feld feld10">ein Projekt abschließen</div>
        <div class="feld feld11">eine Frage stellen</div>
        <div class="feld feld12">eine Idee haben</div>

        <div id="dice">
            <img src="images/dice1.png" id="diceImg">
        </div>
    </div>

    <img src="images/piece.png" id="piece">

    <div id="overlay">
        <button id="closeOverlay">X</button>
        <div id="overlayContent"></div>
    </div>

    <script>
        const diceImg = document.getElementById('diceImg');
        const piece = document.getElementById('piece');
        const overlay = document.getElementById('overlay');
        const overlayContent = document.getElementById('overlayContent');
        const closeOverlay = document.getElementById('closeOverlay');

        let currentPosition = 1;
        const fieldPositions = [];

        for (let i = 1; i <= 12; i++) {
            const field = document.querySelector(`.feld${i}`);
            const rect = field.getBoundingClientRect();
            fieldPositions.push({x: rect.left + rect.width/2 - 27, y: rect.top + rect.height/2 - 47});
        }

        piece.style.left = fieldPositions[currentPosition-1].x + "px";
        piece.style.top = fieldPositions[currentPosition-1].y + "px";

        diceImg.addEventListener('click', () => {
            // generar número aleatorio directamente
            const roll = Math.floor(Math.random() * 6) + 1;
            diceImg.src = `images/dice${roll}.png`; // actualizar dado sin animación

            movePiece(roll);
        });

        function movePiece(steps) {
            let moves = 0;
            const moveInterval = setInterval(() => {
                currentPosition++;
                if (currentPosition > 12) currentPosition = 1; // loop infinito
                const pos = fieldPositions[currentPosition-1];
                piece.style.left = pos.x + "px";
                piece.style.top = pos.y + "px";

                moves++;
                if (moves >= steps) {
                    clearInterval(moveInterval);
                    overlayContent.textContent = document.querySelector(`.feld${currentPosition}`).textContent;
                    overlay.style.display = "flex";
                }
            }, 300);
        }

        closeOverlay.addEventListener('click', () => {
            overlay.style.display = "none";
        });
    </script>
</body>
</html>
